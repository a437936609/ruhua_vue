(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2346be7d"],{"8e1c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"apply"},[i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("NavTo")],1),i("el-container",[i("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[i("Header")],1),t.is_install?t._e():i("div",[i("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[i("el-main",[i("div",{staticClass:"article"},[i("div",{staticStyle:{"text-align":"left"}},[i("el-button",{on:{click:t.jumpback}},[t._v("返回")]),t._v(" \n\t\t\t\t\t\t\t\t"),t.is_install?t._e():i("el-button",{attrs:{type:"primary"},on:{click:t.increase}},[t._v("安装")])],1),i("div",{staticStyle:{height:"20px"}},[t._v(" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_install,expression:"!is_install"}],staticClass:"bar"},[[i("el-progress",{attrs:{percentage:t.percentage,"stroke-width":10,color:t.customColorMethod}})],1==t.progsuc?[i("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"60px"}})]:0==t.progsuc?[i("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"60px"}},[i("el-button",{staticStyle:{width:"10%"},attrs:{type:"success"}},[t._v("安装中")])],1)]:[i("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"60px"}},[i("el-button",{staticStyle:{width:"10%"},attrs:{type:"info"}},[t._v("未安装")])],1)]],2)])])],1)],1),t.is_install?i("div",[i("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[i("el-main",[i("div",{staticClass:"article"},[i("div",{staticStyle:{"text-align":"left"}},[i("el-button",{on:{click:t.jumpback}},[t._v("返回")]),t._v("  \n\t\t\t\t\t\t\t\t"),i("el-button",{attrs:{type:"primary"},on:{click:t.record}},[t._v("中奖记录")]),i("div",{staticStyle:{height:"20px"}},[t._v(" ")])],1),[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),i("el-table-column",{attrs:{prop:"nav.url_name",label:"名称"}}),i("el-table-column",{attrs:{prop:"img_id",label:"导航图标",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.nav?i("img",{staticClass:"navimg",attrs:{src:t.getimg+e.row.nav.img_id}}):t._e()]}}],null,!1,1196842924)}),i("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.type?i("p",[t._v("积分抽奖")]):t._e(),1==e.row.type?i("p",[t._v("每日抽奖")]):t._e(),2==e.row.type?i("p",[t._v("积分+每日抽奖")]):t._e()]}}],null,!1,4266713603)}),i("el-table-column",{attrs:{label:"是否开启"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.nav?i("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(i){return t.onswitch(e.row.nav_id,e.row.nav.is_visible)}},model:{value:1==e.row.nav.is_visible,callback:function(i){t.$set(e.row.nav,"is_visible==1",i)},expression:"scope.row.nav.is_visible==1"}}):t._e()]}}],null,!1,3562824496)}),i("el-table-column",{attrs:{prop:"operation",label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"infor",size:"small"},on:{click:function(i){return t.update(e.row.id,e.$index)}},slot:"reference"},[t._v("修改")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"primary",size:"small"},on:{click:function(i){return t.rule(e.row.id)}},slot:"reference"},[t._v("规则")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(i){return t.del(e.row.id)}},slot:"reference"},[t._v("删除")])]}}],null,!1,978139618)}),i("strong")],1)]],2)])],1)],1):t._e(),i("el-dialog",{attrs:{title:t.edit_title,visible:t.is_disLogshow,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.is_disLogshow=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称"}},[i("el-input",{model:{value:t.form.url_name,callback:function(e){t.$set(t.form,"url_name",e)},expression:"form.url_name"}})],1),i("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"活动状态"}},[i("el-radio",{attrs:{label:0,border:"",size:"medium"},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},[t._v("关闭")]),i("el-radio",{attrs:{label:1,border:"",size:"medium"},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},[t._v("开启")])],1),i("el-form-item",{attrs:{label:"类型"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),0==t.form.type||2==t.form.type?i("el-form-item",{attrs:{label:"所需积分"}},[i("el-input",{model:{value:t.form.integral,callback:function(e){t.$set(t.form,"integral",e)},expression:"form.integral"}})],1):t._e(),1==t.form.type||2==t.form.type?i("el-form-item",{attrs:{label:"每日次数"}},[i("el-input",{model:{value:t.form.tice,callback:function(e){t.$set(t.form,"tice",e)},expression:"form.tice"}})],1):t._e(),i("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"奖品数量"}},[i("el-radio",{attrs:{label:0,border:"",size:"medium"},model:{value:t.form.reword,callback:function(e){t.$set(t.form,"reword",e)},expression:"form.reword"}},[t._v("奖品不限")]),i("el-radio",{attrs:{label:1,border:"",size:"medium"},model:{value:t.form.reword,callback:function(e){t.$set(t.form,"reword",e)},expression:"form.reword"}},[t._v("奖品有限")])],1),i("el-form-item",{attrs:{label:"导航图标","label-width":t.formLabelWidth}},[t.img_list.length>0?[i("div",{staticStyle:{display:"flex",width:"530px","flex-wrap":"wrap"}},[t._l(t.img_list,(function(e,a){return[i("i",{staticClass:"el-icon-circle-close",on:{click:function(e){return t.delimg(a)}}}),t.img_list.length>0?i("div",{staticClass:"picA"},[i("img",{staticClass:"img",attrs:{src:t.getimg+t.form.img_id}})]):t._e()]}))],2)]:t._e(),t.img_list.length<1?i("div",{staticClass:"picA",staticStyle:{"margin-left":"19px"},on:{click:t.choose_pic}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"margin-top":"45%",height:"28px",width:"28px"}})]):t._e()],2),i("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"说明"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.content,expression:"form.content"}],staticStyle:{width:"100%",height:"200px"},domProps:{value:t.form.content},on:{input:function(e){e.target.composing||t.$set(t.form,"content",e.target.value)}}})])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.sub_add}},[t._v("确 定")])],1)],1)],1)],1),i("Pic",{attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length}})],1)},s=[],l=(i("5c96"),i("15fc")),o=i("71c2"),r=i("ab56"),n=(i("a49b"),{data:function(){return{is_install:!0,is_add:!0,is_disLogshow:!1,edit_title:"添加",progsuc:-1,percentage:0,tableData:[],formLabelWidth:"120px",getimg:this.$getimg,form:{url_name:"",type:0,tice:0,reword:0,integral:0,state:0,img_id:"",id:"",content:""},options:[{label:"积分抽奖",value:0},{label:"每日抽奖",value:1},{label:"积分+每日抽奖",value:2}],length:1,drawer:!1,img_list:[]}},components:{Header:o["a"],NavTo:l["a"],Pic:r["default"]},mounted:function(){this._load()},methods:{handleClose:function(){this.is_disLogshow=!1},jumpback:function(){this.$router.push({path:"/extend/application"})},get_data:function(){var t=this;this.is_install&&this.http.get("games/get_jgg").then((function(e){console.log(e),t.tableData=e.data}))},_load:function(){var t=this;this.http.post_show("plugIn/is_game_Install",{lock:"jgg"}).then((function(e){"没有权限"==e.msg?(t.show=!1,t.$router.push({path:"/extend/application"}),t.$message({message:"没有权限",type:"warning"})):200==e.status&&(1==e.data?(t.get_data(),t.is_install=!0):t.is_install=!1)}))},del:function(t){var e=this;this.http.del("games/del_jgg?id="+t).then((function(t){e.get_data()}))},get_img:function(t){for(var e in this.drawer=!1,t){var i=t[e];this.img_list.push(i),this.form.img_id=i.url}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list)},to_choose_img:function(){this.drawer=!this.drawer},is_show:function(){this.drawer=!this.drawer},choose_pic:function(){this.length=6-this.img_list.length,this.drawer=!0},clear_data:function(){this.form.award=0,this.form.type=0,this.form.tice=0,this.form.reword=0,this.form.integral=0,this.form.state=0,this.form.img_id="",this.form.id="",this.form.url_name="",this.img_list=[]},customColorMethod:function(t){return t<30?"#909399":t<70?"#e6a23c":"#67c23a"},increase:function(){var t=this;this.progsuc=0;var e=setInterval((function(i){t.percentage+=10,t.percentage>100&&(t.percentage=100,clearInterval(e),t.progsuc=1,t.is_install=!0),1!=t.cone&&t.percentage>90&&(t.percentage=90,t.progsuc=0)}),400),i={pulg:"jgg",stoken:localStorage.getItem("stoken")};this.http.post_show("plugIn/installGamePlug",i).then((function(e){200==e.status?t.cone=!0:t.cone=!1}))},rule:function(t){this.$router.push({path:"/extend/jggrule",query:{id:t}})},cancel:function(){this.is_disLogshow=!1},delimg:function(t){this.img_list.splice(t,1)},onswitch:function(t,e){var i=this;console.log(t),console.log(e);var a=1;1==e&&(a=0),this.http.put_show("games/upadate_state",{id:t,state:a}).then((function(t){i.get_data()}))},sub_add:function(){var t=this;this.is_add?this.http.post("games/add_jgg",this.form).then((function(e){200==e.data.status&&t.$message({type:"success",message:"添加成功!"}),t.clear_data(),t.is_disLogshow=!1,t.get_data()})):this.http.post("games/update_jgg",this.form).then((function(e){200==e.data.status&&t.$message({type:"success",message:"添加成功!"}),t.clear_data(),t.is_disLogshow=!1,t.get_data()}))},record:function(){this.$router.push("/extend/record")},update:function(t,e){this.img_list=[],console.log(e),this.form.id=this.tableData[e].id,this.form.award=this.tableData[e].award,this.form.type=this.tableData[e].type,this.form.tice=this.tableData[e].tice,this.form.reword=this.tableData[e].reword,this.form.integral=this.tableData[e].integral,this.form.state=this.tableData[e].state,this.form.img_id=this.tableData[e].nav.img_id,this.form.url_name=this.tableData[e].nav.url_name,this.form.content=this.tableData[e].content,this.is_disLogshow=!0,this.is_add=!1,this.edit_title="编辑",this.img_list.push(this.form.img_id)}}}),c=n,d=(i("c5ee"),i("2877")),m=Object(d["a"])(c,a,s,!1,null,"735f97ec",null);e["default"]=m.exports},ae45:function(t,e,i){},c5ee:function(t,e,i){"use strict";i("ae45")}}]);