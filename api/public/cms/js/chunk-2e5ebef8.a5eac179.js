(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e5ebef8"],{"0f8a":function(t,e,a){"use strict";a("3ed2")},"1e60":function(t,e,a){},"386d":function(t,e,a){"use strict";var s=a("cb7c"),i=a("83a1"),r=a("5f1b");a("214f")("search",1,(function(t,e,a,l){return[function(a){var s=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,s):new RegExp(a)[e](String(s))},function(t){var e=l(a,t,this);if(e.done)return e.value;var n=s(t),o=String(this),c=n.lastIndex;i(c,0)||(n.lastIndex=0);var d=r(n,o);return i(n.lastIndex,c)||(n.lastIndex=c),null===d?-1:d.index}]}))},"3ed2":function(t,e,a){},"41d8":function(t,e,a){"use strict";a("1e60")},6917:function(t,e,a){"use strict";a("9aee")},7915:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("NavTo")],1),a("el-container",[a("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[a("Header")],1),a("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[a("el-main",[t.addShow?t._e():a("el-collapse",{staticStyle:{padding:"25px","background-color":"#fff","margin-bottom":"15px"},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"订单搜索",name:"1"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"sea_02"},[a("div",{staticClass:"sea_02_01"},[a("div",{staticClass:"sea_02_01_l"},[t._v("订单号：")]),a("div",{staticClass:"sea_02_01_r"},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.search_form.num,callback:function(e){t.$set(t.search_form,"num",e)},expression:"search_form.num"}})],1),a("div",{staticClass:"sea_02_01_l"},[t._v("用户名：")]),a("div",{staticClass:"sea_02_01_r"},[a("el-input",{attrs:{placeholder:"请输入用户名全称"},model:{value:t.search_form.user_name,callback:function(e){t.$set(t.search_form,"user_name",e)},expression:"search_form.user_name"}})],1),a("div",{staticClass:"sea_02_01_l"},[t._v("商品名：")]),a("div",{staticClass:"sea_02_01_r"},[a("el-input",{attrs:{placeholder:"请输入商品名"},model:{value:t.search_form.pro_name,callback:function(e){t.$set(t.search_form,"pro_name",e)},expression:"search_form.pro_name"}})],1),a("div",{staticClass:"sea_02_01_l"},[t._v("日期(近期)：")]),a("div",{staticClass:"sea_02_01_r"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":t.show_date_range[0],"end-placeholder":t.show_date_range[1],"picker-options":t.pickerOptions,"value-format":"timestamp","default-value":t.date_range},on:{change:t.order_time_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.search("goods_name")}}},[t._v("搜索")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.reset}},[t._v("刷新")])],1)]),a("div",{staticClass:"sea_02_01"},[a("div",{staticClass:"sea_02_01_l"},[t._v("创建时间：")]),a("div",{staticClass:"sea_02_01_r"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.reset}},[t._v("全部")]),t._l(t.time,(function(e){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return t.choose_time(e.value)}}},[t._v(t._s(e.ti))])]}))],2)]),a("div",{staticClass:"sea_02_01"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.export_dialog=!0}}},[t._v("导出\n\t\t\t\t\t\t\t\t\t\t")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.jump_export_list}},[t._v("导出历史\n\t\t\t\t\t\t\t\t\t\t")])],1)])]),t.addShow?t._e():a("el-row",{attrs:{gutter:20}},[t._l(t.message,(function(e,s){return[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"tishi",staticStyle:{border:"1px solid #DADADA","border-radius":"5px"}},[a("div",{staticClass:"ts_01"},[a("div",{staticClass:"ts_01_l"},[t._v(t._s(e.types))]),a("div",{staticClass:"ts_01_m"},[t._v(t._s(e.wen))])]),a("div",{staticClass:"ts_02"},[a("div",{staticClass:"ts_02_l"},[a("span",[t._v(t._s(e.num))])])])])])]}))],2)],1)],1),t.addShow?t._e():a("div",{staticStyle:{padding:"15px","background-color":"#fff"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""},on:{"filter-change":t.xxx}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"order_num",label:"订单号",width:"180"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"goods_id",width:"280",filters:t.goods_list,"filter-method":t.filterHandler},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.ordergoods,(function(e,s){return a("div",[t._v(t._s(t._f("ellipsis")(e.goods_name))+"\n\t\t\t\t\t\t\t\t\t")])}))}}],null,!1,2610969561)}),a("el-table-column",{attrs:{label:"订单价格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.payment_state?[t._v(t._s(e.row.order_money))]:a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.open(e.row.order_money,e.row.order_id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.order_money)+"\n\t\t\t\t\t\t\t\t\t")])]}}],null,!1,715620795)}),a("el-table-column",{attrs:{prop:"message",label:"客户备注",width:"160"}}),a("el-table-column",{attrs:{prop:"users.nickname",label:"用户",width:"160"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建日期",width:"180"}}),a("el-table-column",{attrs:{label:"支付状态",width:"100",filters:[{text:"已支付",value:1},{text:"未支付",value:0}],"filter-method":t.filter_pay,"filter-placement":"bottom-end","column-key":"zf"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.payment_state?a("p",[t._v("已支付")]):a("p",{staticStyle:{color:"Red"}},[t._v("未支付")])]}}],null,!1,29383434)}),a("el-table-column",{attrs:{label:"订单状态",width:"100",filters:[{text:"已退款",value:-2},{text:"退款中",value:-1},{text:"未完成",value:0},{text:"已完成",value:1},{text:"已评价",value:2}],"filter-placement":"bottom-end","column-key":"dd"},scopedSlots:t._u([{key:"default",fn:function(e){return[-2==e.row.state?a("p",[t._v("已退款")]):t._e(),-1==e.row.state?a("p",[t._v("退款中")]):t._e(),0==e.row.state?a("p",[t._v("未完成")]):t._e(),1==e.row.state?a("p",[t._v("已完成")]):t._e(),2==e.row.state?a("p",[t._v("已评价")]):t._e(),-3==e.row.state?a("p",[t._v("已关闭")]):t._e()]}}],null,!1,1531670032)}),a("el-table-column",{attrs:{label:"运输状态",width:"100",filters:[{text:"待发货",value:0},{text:"已发货",value:1},{text:"已收货",value:2}],"filter-method":t.filter_send,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.shipment_state?a("p",{staticStyle:{color:"#E6A23C"}},[t._v("待发货")]):t._e(),1==e.row.shipment_state?a("p",{staticStyle:{color:"#909399"}},[t._v("已发货")]):t._e(),2==e.row.shipment_state?a("p",{staticStyle:{color:"#909399"}},[t._v("已收货")]):t._e()]}}],null,!1,4241527802)}),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.show_order(e.row.order_id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t查看\n\t\t\t\t\t\t\t\t\t")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(a){return t.del(e.row.order_id,e.$index)}},slot:"reference"},[t._v("删除")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",size:"small"},on:{click:function(a){return t.print_order(e.row.order_id)}}},[t._v("打印")])]}}],null,!1,3369877482)})],1),1==t.fy_show?a("el-pagination",{staticStyle:{"margin-top":"50px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}}):t._e()],1),t.addShow?a("div",{staticStyle:{padding:"15px","background-color":"#fff"}},[a("div",{staticClass:"order-back",staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.back}},[t._v("返回")])],1),a("order-details",{attrs:{order_id:this.order_id}})],1):t._e()],1)],1)],1)],1),a("el-dialog",{attrs:{title:"修改",visible:t.ed,width:"35%","before-close":t.handleClose},on:{"update:visible":function(e){t.ed=e}}},[a("span",{staticStyle:{display:"flex","justify-content":"flex-start"}},[t._v("原价"+t._s(t.yj)+",增减金额：")]),a("el-input",{attrs:{placeholder:"例:+100或者-100"},model:{value:t.ed_money,callback:function(e){t.ed_money=e},expression:"ed_money"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.sub_ed_order}},[t._v("确 定")])],1)],1),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"导出",visible:t.export_dialog,width:"35%","before-close":t.handleClose},on:{"update:visible":function(e){t.export_dialog=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选\n\t\t")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedCities,callback:function(e){t.checkedCities=e},expression:"checkedCities"}},t._l(t.cities,(function(e){return a("el-checkbox",{key:e.name,attrs:{label:e.value}},[t._v(t._s(e.name))])})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.upload(t.checkedCities)}}},[t._v("确 定")])],1)],1)],1)},i=[],r=(a("a481"),a("6b54"),a("ade3")),l=a("5c96"),n=a("a49b"),o=a("15fc"),c=a("71c2"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[a("div",{staticClass:"order"},[t.addShow?a("div",[a("div",{staticClass:"order-back"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.back}},[t._v("返回")])],1),a("order-details",{attrs:{order_id:this.order_id}})],1):t._e(),t.addShow?t._e():[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"order_num",label:"订单号",width:"180"}}),a("el-table-column",{attrs:{label:"商品名称",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.ordergoods,(function(e,s){return a("div",[t._v(t._s(t._f("ellipsis")(e.goods_name)))])}))}}],null,!1,1292229512)}),a("el-table-column",{attrs:{label:"订单价格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.open(e.$index)}}},[t._v(t._s(e.row.order_money/100))])]}}],null,!1,1308651463)}),a("el-table-column",{attrs:{prop:"message",label:"客户备注",width:"160"}}),a("el-table-column",{attrs:{prop:"users.nickname",label:"用户",width:"160"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建日期",width:"180"}}),a("el-table-column",{attrs:{label:"支付状态",width:"100",filters:[{text:"已支付",value:1},{text:"未支付",value:0}],"filter-method":t.filterTag},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.pay_status?a("p",[t._v("已支付")]):a("p",{staticStyle:{color:"Red"}},[t._v("未支付")])]}}],null,!1,1515657051)}),a("el-table-column",{attrs:{label:"退货状态",width:"100",filters:[{text:"已退货",value:1},{text:"未退货",value:0}],"filter-method":t.filter_tui},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.tui_status?a("p",[t._v("已退货")]):a("p",{staticStyle:{color:"Red"}},[t._v("未退货")])]}}],null,!1,2418584411)}),a("el-table-column",{attrs:{label:"收货状态",width:"100",filters:[{text:"已收货",value:1},{text:"未收货",value:0}],"filter-method":t.filter_receive},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.receive_status?a("p",[t._v("已收货")]):a("p",{staticStyle:{color:"#E6A23C"}},[t._v("未收货")])]}}],null,!1,247181464)}),a("el-table-column",{attrs:{label:"货物状态",filters:[{text:"已发货",value:1},{text:"未发货",value:0}],"filter-method":t.filter_send},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.drive_status&&1==e.row.receive_status?a("p",{staticStyle:{color:"#909399"}},[t._v("已收货")]):1==e.row.drive_status&&0==e.row.receive_status?a("p",{staticStyle:{color:"#67C23A"}},[t._v("已发货")]):a("p",{staticStyle:{color:"#E6A23C"}},[t._v("未发货")])]}}],null,!1,3443590977)}),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.show_order(e.row.order_id)}}},[t._v("查看")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(a){return t.del(e.row.order_id,e.$index)}},slot:"reference"},[t._v("删除")])]}}],null,!1,1519095456)})],1),a("div",{staticClass:"H20"}),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}})]],2)])],1)},u=[],_=(a("386d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"detail_page"}},[a("div",[a("div",{staticClass:"details"},[a("div",{staticClass:"details-l fl"},[t._m(0),a("div",{staticClass:"details-l-02"},[a("div",{staticClass:"details-l-02-l"},[t._v("订单编号 ：")]),a("div",{staticClass:"details-l-02-r"},[t._v(t._s(t.details.order_num))])]),a("div",{staticClass:"details-l-02"},[a("div",{staticClass:"details-l-02-l"},[t._v("付款方式 ：")]),a("div",{staticClass:"details-l-02-r"},[t._v(t._s("wx"==t.details.payment_type?"微信":"其他"))])]),a("div",{staticClass:"details-l-02"},[a("div",{staticClass:"details-l-02-l"},[t._v("买家 ：")]),a("div",{staticClass:"details-l-02-r"},[t._v(t._s(t.details.users.nickname))])]),a("div",{staticClass:"details-l-02"},[a("div",{staticClass:"details-l-02-l"},[t._v("买家IP ：")]),a("div",{staticClass:"details-l-02-r"},[t._v(t._s(t.details.user_ip))])]),a("div",{staticClass:"details-l-02"},[a("div",{staticClass:"details-l-02-l"},[t._v("购买时间 ：")]),a("div",{staticClass:"details-l-02-r"},[t._v(t._s(t.details.create_time))])]),a("div",{staticClass:"details-l-02"},[a("div",{staticClass:"details-l-02-l"},[t._v("使用时间 ：")]),a("div",{staticClass:"details-l-02-r"},[t._v(t._s(t.details.create_time))])]),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #f0f0f0"}}),a("div",{staticClass:"details-l-02"},[a("div",{staticClass:"details-l-02-l"},[t._v("收货信息 ：")]),a("div",{staticClass:"details-l-02-r"},[t._v(t._s(t.details.receiver_name)+","+t._s(t.details.receiver_mobile)+","+t._s(t.details.receiver_province)+t._s(t.details.receiver_city)+t._s(t.details.receiver_district)+t._s(t.details.receiver_address))])]),a("div",{staticClass:"details-l-02"},[a("div",{staticClass:"details-l-02-l"},[t._v("买家留言 ：")]),a("div",{staticClass:"details-l-02-r"},[t._v(t._s(t.details.message))])])]),a("div",{staticClass:"details-r fl"},[a("div",{staticClass:"details-r-01"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("i",{staticClass:"el-icon-warning"}),t._v("\n\t\t\t\t\t\t\t订单状态：\n\t\t\t\t\t\t\t"),1==t.details.payment_state?a("span",[t._v("\n\t\t\t\t\t\t\t\t已支付\n\t\t\t\t\t\t\t\t"),0==t.details.shipment_state?a("span",[t._v("- 待发货")]):a("span",[t._v("已发货")])]):a("span",[t._v("未支付")])]),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.form_shipping=!0}}},[t._v("快递单号")])],1)],1),a("el-row",[a("p",[t._v(t._s(t.details.remark))])]),a("el-table",{ref:"singleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.details.ordergoods,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"商品名称",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"80%"}},[t._v(t._s(t._f("ellipsis")(e.row.goods_name)))])]}}])}),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.row.sku_name)+"\n\t\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{property:"num",label:"数量",width:"120"}}),a("el-table-column",{attrs:{property:"price",label:"单价",width:"120"}}),a("el-table-column",{attrs:{property:"price",label:"合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.price*e.row.num))]}}])})],1)],1),a("hr",{staticStyle:{height:"2px",border:"none","border-top":"2px dotted #f0f0f0"}}),a("el-row",{staticStyle:{"font-size":"14px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6,offset:1}},[t._v("快递: "+t._s(t.kd_cmp[t.details.courier])+" "+t._s(t.details.courier_num))]),a("el-col",{attrs:{span:6,offset:8}},[t._v("运费："+t._s(t.details.shipping_money)+" 订单总金额：¥"+t._s(t.details.order_money))])],1)],1),a("div",{staticClass:"clear"})]),a("div",{staticClass:"log"},[a("div",{staticClass:"log-01"},[t._v("订单日志")]),a("div",{staticClass:"log-02"},[a("ul",t._l(t.log,(function(e,s){return a("li",[t._v("\n\t\t\t\t\t\t["+t._s(e.create_time)+"]\n\t\t\t\t\t\t"),a("b",[t._v(t._s(e.type_name)+"：")]),t._v("\n\t\t\t\t\t\t"+t._s(e.content)+"\n\t\t\t\t\t")])})),0)])]),a("div",{staticClass:"clear"})]),a("el-dialog",{attrs:{width:"400px",visible:t.form_shipping},on:{"update:visible":function(e){t.form_shipping=e}}},[a("el-form",{staticStyle:{display:"flex","flex-wrap":"wrap"},attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"快递公司","label-width":"80px"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.form.courier,callback:function(e){t.$set(t.form,"courier",e)},expression:"form.courier"}},t._l(t.kd_cmp,(function(t,e){return a("el-option",{key:t,attrs:{value:e,label:t}})})),1)],1),a("el-form-item",{attrs:{label:"运单号","label-width":"80px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.courier_num,callback:function(e){t.$set(t.form,"courier_num",e)},expression:"form.courier_num"}})],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.form_shipping=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.courier_sub}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"",width:"500px",visible:t.remark},on:{"update:visible":function(e){t.remark=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注","label-width":"80px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.remark=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.remark_sub}},[t._v("确 定")])],1)],1)],1)}),h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details-l-01"},[a("div",{staticClass:"fl"},[t._v("订单信息")]),a("div",{staticClass:"clear"})])}],m={name:"Details",filters:{ellipsis:function(t){return t?t.length>30?t.slice(0,30)+"...":t:""}},props:["order_id"],data:function(){return{log:[],details:[],list:[],mid:this.order_id,remark:!1,form:{remark:"",price:"",courier:"",courier_num:""},form_price:!1,form_shipping:!1,formLabelWidth:"120px",kd_cmp:{SF:"顺丰速运",HTKY:"百世快递",ZTO:"中通快递",STO:"申通快递",YTO:"圆通速递",YD:"韵达速递",YZPY:"邮政快递包裹",EMS:"EMS",HHTT:"天天快递",JD:"京东快递",UC:"优速快递",DBL:"德邦快递",ZJS:"宅急送",UPS:"UPS",0:"其他"}}},methods:{post_details:function(){var t=this,e=this;this.http.post("order/admin/get_order_one",{id:this.mid}).then((function(a){e.details=a.data.order,t.log=a.data.log}))},del:function(t,e){},courier_sub:function(){var t=this,e={courier:this.form.courier,courier_num:this.form.courier_num,order_id:this.order_id};this.http.post_show("order/admin/edit_courier",e).then((function(e){var a=e.status.toString();2==a.charAt(0)?(t.$message({showClose:!0,message:"修改成功",type:"success"}),t.form_shipping=!1,t.form.courier="",t.form.courier_num=""):t.$message({showClose:!0,message:e.msg,type:"error"})}))}},mounted:function(){this.post_details()}},f=m,p=(a("41d8"),a("2877")),v=Object(p["a"])(f,_,h,!1,null,null,null),g=v.exports,b={name:"Order",filters:{ellipsis:function(t){return t?t.length>18?t.slice(0,18)+"...":t:""}},data:function(){return{value:"",visible2:!1,addShow:!1,checkdDistributor:null,order_id:0,size:10,total:"",all:"",list:"",status:0,total2:""}},props:["search_key","reset_key","range_start","range_end","quanbu","total"],components:{OrderDetails:g},watch:{search_key:function(){this.search_key&&(this.value=this.search_key,this.search())},reset_key:function(){1==this.reset_key&&(this.total="",console.log(this.reset_key),this.alls())},range_start:function(){this.range_start&&(this.status=1,console.log(this.range_start),this.post_order())},range_end:function(){this.range_end&&console.log(this.range_end)},quanbu:function(){1==this.quanbu&&this.post_order()},total:function(){this.total&&(console.log(this.total),this.total2=this.total,this.post_order())}},mounted:function(){this.post_order()},methods:{filter_receive:function(t,e){return e.receive_status===t},filter_tui:function(t,e){return e.tui_status===t},filter_send:function(t,e){return e.drive_status===t},filterTag:function(t,e){return e.pay_status===t},search:function(){this.search_key&&(this.value=this.search_key),this.post_order(1,this.value)},alls:function(){var t=l["Loading"].service();this.value="",this.post_order(),t.close()},jump_page:function(t){var e=this,a=(t-1)*e.size,s=t*e.size;this.list=this.all.slice(a,s)},handleClick:function(t){console.log(t)},post_order:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=this;this.http.post("/admin/get_order_all",{page:e,size:this.size,keywords:a}).then((function(e){s.all=e.data,s.list=e.data.slice(0,s.size),s.total2?s.total=s.total2:s.total=e.data.length;var a=[];for(var i in e.data)a[i]=e.data[i].create_time,a[i]=new Date(e.data[i].create_time).getTime();if(localStorage.setItem("time",JSON.stringify(a)),1==s.status)for(var r in s.list=[],e.data){a[r]=e.data[r].create_time,a[r]=new Date(e.data[r].create_time).getTime();var l=new Date(e.data[r].create_time).getTime();t.range_start<l&&l<t.range_end&&s.list.push(e.data[r])}}))},show_order:function(t){this.addShow=!0,this.order_id=t},back:function(){this.order_id=0,this.addShow=!1},del:function(t,e){var a=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.http.put_show("/admin/del_order",{id:t}).then((function(t){return 1==t.data?(a.$message({showClose:!0,message:"删除成功",type:"success"}),a.order.splice(e,1),!1):400==t.response.status?(a.$alert(t.response.data.msg,""),!1):(a.$message({showClose:!0,message:"删除失败",type:"error"}),!1)}))}))},daochu:function(){var t=document.createElement("a"),e=localStorage.getItem("token");t.href=n["a"]+"daochu?token="+e,t.target="_blank",t.download="ly_2019.csv",t.click(),t.remove()},open:function(t){var e=this;this.$prompt("原价"+this.list[t].order_money/100+"，增减金额:","修改",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:"如:-50"}).then((function(t){var a=t.value;e.$message({type:"success",message:"修改为: "+a})})).catch((function(){e.$message({type:"info",message:"取消修改"})}))}}},y=b,w=(a("6917"),Object(p["a"])(y,d,u,!1,null,null,null)),k=w.exports,x=[{name:"订单号",value:"number"},{name:"下单时间",value:"create_time"},{name:"订单状态",value:"status"},{name:"付款时间",value:"pay_time"},{name:"发货时间",value:"create_time"},{name:"买家",value:"nickname"},{name:"收货人",value:"username"},{name:"收货人地址",value:"address"},{name:"实付金额",value:"order_money"},{name:"运费",value:"yunfei"},{name:"物流单号",value:"wuliunum"},{name:"买家留言",value:"message"},{name:"商家备注",value:"messages"},{name:"商品信息",value:"ordergoods"}],C={filters:{ellipsis:function(t){return t?t.length>16?t.slice(0,16)+"...":t:""}},data:function(){var t;return t={checkAll:!1,checkedCities:[],cities:x,val:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],isIndeterminate:!0,export_dialog:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},date_range:[],state1:"",search_form:{user_name:"",pro_name:"",num:"",stat_time:"",end_time:""},goods_list:[],user_list:[],show_default:!0,fy_show:1,eid:"",ed_money:"",yj:"",ed:!1,activeNames:"1",input:"",type:[{names:"普通订单",num:879,state:0},{names:"拼团订单",num:879,state:0},{names:"秒杀订单",num:879,state:0},{names:"砍价订单",num:879,state:0}],time:[{ti:"昨天",value:"0"},{ti:"今天",value:"1"},{ti:"本周",value:"2"},{ti:"本月",value:"3"},{ti:"本季度",value:"4"},{ti:"今年",value:"5"}],state:[],message:[{types:"订单",num:0,mess:"待发货",state:1,wen:"急",duibi:0,fudu:0},{types:"订单",num:0,mess:"退换货",state:0,wen:"待",duibi:0,fudu:0},{types:"商品",num:0,mess:"库存预警",state:1,wen:"急",duibi:0,fudu:1},{types:"待提现",num:0,mess:"待提现",state:1,wen:"待",duibi:0,fudu:0},{types:"订单",num:2,mess:"昨日订单数",state:0,wen:"昨",duibi:1,fudu:1},{types:"交易",num:2,mess:"昨日订单数",state:0,wen:"昨",duibi:1,fudu:0},{types:"粉丝",num:20,mess:"今日新增粉丝",state:0,wen:"今",duibi:1,fudu:1},{types:"粉丝",num:27,mess:"本月新增粉丝",state:0,wen:"月",duibi:1,fudu:0}],dialogImageUrl:"",dialogVisiblea:!1,tab_nav:!1,dialogVisible:!1,dialogVisibleadd:!1,dialogFormVisible:!1},Object(r["a"])(t,"val",["number","create_time","status","pay_time","create_time","nickname","username","address","order_money","yunfei","wuliunum","message","messages","ordergoods"]),Object(r["a"])(t,"oid",0),Object(r["a"])(t,"form",{id:"",goods_name:"",content:"",img_id:[],stock:"",points:""}),Object(r["a"])(t,"form_pro",{goods_name:"",content:"",img_id:[],stock:"",points:""}),Object(r["a"])(t,"formLabelWidth","120px"),Object(r["a"])(t,"list",[]),Object(r["a"])(t,"all",""),Object(r["a"])(t,"size",10),Object(r["a"])(t,"total",0),Object(r["a"])(t,"options",[]),Object(r["a"])(t,"value",""),Object(r["a"])(t,"typeList",[]),Object(r["a"])(t,"upfile_banner_list",[]),Object(r["a"])(t,"upfile_url",n["a"]+"com/up_img?back=id"),Object(r["a"])(t,"upfile_head",{token:localStorage.getItem("token")}),Object(r["a"])(t,"upfile_list",[]),Object(r["a"])(t,"search_key",""),Object(r["a"])(t,"reset_key",""),Object(r["a"])(t,"week_start",""),Object(r["a"])(t,"week_end",""),Object(r["a"])(t,"month_start",""),Object(r["a"])(t,"month_end",""),Object(r["a"])(t,"now_year_firstDay",""),Object(r["a"])(t,"now_year_lastDay",""),Object(r["a"])(t,"Quarter_start",""),Object(r["a"])(t,"Quarter_end",""),Object(r["a"])(t,"yestoday_start",""),Object(r["a"])(t,"yestoday_end",""),Object(r["a"])(t,"range_start",""),Object(r["a"])(t,"range_end",""),Object(r["a"])(t,"quanbu",""),Object(r["a"])(t,"addShow",!1),Object(r["a"])(t,"show_date_range",[]),t},components:{Header:c["a"],NavTo:o["a"],Order:k,OrderDetails:g},mounted:function(){var t=new Date,e=new Date;e.setTime(e.getTime()-2592e6),this.date_range[0]=e.getTime(),this.date_range[1]=t.getTime(),this.show_date_range[0]=this.happenTimeFun(e),this.show_date_range[1]=this.happenTimeFun(t),this.get_week(),this.get_month(),this.get_year(),this.get_Quarter(),this.getDate(),this.get_today(),this.get_all_order(),this.get_order_data(),this.show_default=!0},methods:{upload:function(){console.log("xxx",this.checkedCities),this.get_excel()},happenTimeFun:function(t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var i=e.getDate();i=i<10?"0"+i:i;var r=e.getHours();r=r<10?"0"+r:r;var l=e.getMinutes();l=l<10?"0"+l:l;var n=e.getSeconds();return n=n<10?"0"+n:n,a+"-"+s+"-"+i},handleCheckAllChange:function(){console.log(x),this.checkedCities=this.checkAll?this.val:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(){var t=this.checkedCities.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length},jump_export_list:function(){this.$router.push({path:"/order/export_list"})},order_time_range:function(t){console.log(t)},filterHandler:function(t,e,a){var s=a["property"];return e.ordergoods[0][s]===1*t},xxx:function(t){},open:function(t,e){this.ed=!0,this.yj=t,this.eid=e},handleSelect:function(t){console.log(t)},handleClose:function(){this.ed=!1,this.export_dialog=!1},sub_ed_order:function(){var t=this,e=this;this.http.post_show("order/admin/edit_price",{price:this.ed_money,order_id:this.eid}).then((function(a){e.$message({showClose:!0,message:"修改成功",type:"success"}),t.ed=!1,t.ed_money="",t.get_all_order()}))},cancel:function(){this.ed=!1,this.export_dialog=!1,this.ed_money=""},get_excel:function(){var t=this,e=localStorage.getItem("token"),a="index/export_excl?token="+e,s={title:this.checkedCities};this.http.post(a,s).then((function(e){console.log(e),200==e.status&&(t.$message({showClose:!0,message:"导出成功",type:"success"}),setTimeout((function(){t.$router.push("/order/export_list")}),1e3))}))},back:function(){this.get_all_order(),this.order_id=0,this.addShow=!1},show_order:function(t){this.addShow=!0,this.order_id=t},print_order:function(t){var e=t;console.log(e),this.$router.push({path:"/order/order/print",query:{id:e}})},get_all_order:function(){var t=this,e=this;this.http.post("order/admin/get_order").then((function(a){for(var s in e.all=a.data,e.list=a.data,e.list=a.data.slice(0,e.size),e.total=a.data.length,e.all){var i=1e3*e.all[s].pay_time;t.all[s].pay_time=t.Conversiontime(i)}var r=[],l=[];for(var n in t.all){var o=t.all[n];for(var c in o.users&&(r[o.user_id]=o.users.nickname),o.ordergoods){var d=o.ordergoods[c];l[d.goods_id]=d.goods_name}}var u=[];for(var _ in l)u.push({text:l[_],value:_});t.user_list=r,t.goods_list=u}))},get_order_data:function(){var t=this;this.http.post("statistic/admin/cmsOrderDate").then((function(e){t.message[0].num=e.data.dai_order,t.message[2].num=e.data.stock,t.message[3].num=parseFloat(e.data.tx).toFixed(2),t.message[4].num=e.data.yesterday_order}))},Conversiontime:function(t){var e=new Date(t),a=e.getFullYear()+"-",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",i=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",r=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",l=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",n=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return a+s+i+r+l+n},filter_pay:function(t,e){return console.log(t),e.payment_state===t},filter_tui:function(t,e){return e.tui_status===t},filter_send:function(t,e){return e.shipment_state===t},filterTag:function(t,e){return e.state===t},jump_to_range:function(){},choose_time:function(t){var e=this;this.reset_key=0;var a=[];if(0==t){for(var s in this.all){var i=this.all[s],r=new Date(i.pay_time).getTime();console.log(r),console.log(this.yestoday_start),console.log(this.yestoday_end),this.yestoday_start<r&&r<this.yestoday_end&&a.push(i)}return this.list=a.slice(0,e.size),this.total=a.length,void console.log(a)}if(1==t){for(var l in this.all){var n=this.all[l],o=new Date(n.create_time).getTime();this.day_start<o&&o<this.day_end&&a.push(n)}return this.list=a.slice(0,e.size),this.total=a.length,void console.log(a)}if(2==t){for(var c in this.all){var d=this.all[c],u=new Date(d.create_time).getTime();this.week_start<u&&u<this.week_end&&a.push(d)}return this.list=a.slice(0,e.size),this.total=a.length,void console.log(a)}if(3==t){for(var _ in this.all){var h=this.all[_],m=new Date(h.create_time).getTime();this.month_start<m&&m<this.month_end&&a.push(h)}return this.list=a.slice(0,e.size),this.total=a.length,void console.log(a)}if(4==t){for(var f in this.all){var p=this.all[f],v=new Date(p.create_time).getTime();this.Quarter_start<v&&v<this.Quarter_end&&a.push(p)}return this.list=a.slice(0,e.size),this.total=a.length,void console.log(a)}if(5==t){for(var g in this.all){var b=this.all[g],y=new Date(b.create_time).getTime();this.now_year_firstDay<y&&y<this.now_year_lastDay&&a.push(b)}return this.list=a.slice(0,e.size),this.total=a.length,void console.log(a)}},reset:function(){this.get_all_order(),this.fy_show=1,this.list=this.all.slice(0,this.size)},search:function(){var t=this,e=this;this.list=[],this.search_form.stat_time=this.date_range[0]/1e3,this.search_form.end_time=this.date_range[1]/1e3,this.http.post("order/admin/get_order",this.search_form).then((function(a){console.log("搜索结果（订单号）：",a),t.search_form={pro_name:"",user_name:"",num:""},e.all=a.data,e.list=a.data,e.list=a.data.slice(0,e.size),e.total=a.data.length}))},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},onSubmit:function(){},res_banner_imgs:function(t){console.log("res:",t),this.form_pro.img_id.push(t),console.log("xx:",this.form_pro.img_id)},add_user:function(){this.dialogVisibleadd=!0},edit:function(t,e,a,s,i,r){this.form.id=t,this.form.goods_name=e,this.dialogVisible=!0,this.form.content=a,this.form.img_id=s,this.form.stock=i,this.form.points=r,console.log(this.form)},sub_edit:function(){},jump_page:function(t){var e=this,a=(t-1)*e.size,s=t*e.size;console.log(a,s),this.list=this.all.slice(a,s)},sub:function(){},del:function(t){var e=this,a=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.put_show("order/admin/del_order",{id:t}).then((function(){a.$message({showClose:!0,message:"删除成功",type:"success"}),e.get_all_order()}))}))},close_fun:function(t){this.clear_data(),t()},clear_data:function(){this.dialogFormVisible=!1},get_week:function(){var t=new Date,e=t.getDay(),a=1-e;0==e&&(a=-7);var s=7-e,i=t.getTime();console.log("当前时间",i);var r=new Date(i+24*a*3600*1e3),l=new Date(i+24*s*3600*1e3),n=r.getTime(),o=l.getTime();this.week_start=n,this.week_end=o,console.log(this.week_start),console.log(this.week_end)},get_month:function(){var t=new Date;t.setDate(1);var e=new Date,a=e.getMonth();console.log(a);var s=++a,i=new Date(e.getFullYear(),s,1),r=864e5,l=new Date(i-r),n=t.getTime(),o=l.getTime();this.month_start=n,this.month_end=o,console.log(n+" - "+o)},get_year:function(){var t=new Date,e=t.getFullYear(),a=new Date(e,0,1).getTime(),s=new Date(e,11,31).getTime();this.now_year_firstDay=a,this.now_year_lastDay=s},get_Quarter_date:function(){var t=new Date,e=t.getMonth(),a=0;return e<3&&(a=0),2<e&&e<6&&(a=3),5<e&&e<9&&(a=6),e>8&&(a=9),console.log("季度开始月：",a),a},get_Quarter:function(){var t=new Date,e=t.getYear();e+=e<2e3?1900:0;var a=new Date(e,this.get_Quarter_date(),1).getTime(),s=this.get_Quarter_date()+2;console.log("季度结束月：",s);var i=new Date(e,s,this.get_month_days(s)).getTime();this.Quarter_start=a,this.Quarter_end=i},get_month_days:function(t){var e=new Date,a=e.getYear(),s=new Date(a,t,1),i=new Date(a,t+1,1),r=(i-s)/864e5;return r},getDate:function(){var t=new Date,e=-1;t.setDate(t.getDate()+e);var a=t.getFullYear(),s=t.getMonth()+1,i=t.getDate();s=s<10?"0"+s:s,i=i<10?"0"+i:i;var r=a+"-"+s+"-"+i;this.yestoday_start=new Date(r).getTime()-28800,this.yestoday_end=new Date(r).getTime()+57600},get_today:function(){var t=new Date,e=0;t.setDate(t.getDate()+e);var a=t.getFullYear(),s=t.getMonth()+1,i=t.getDate();s=s<10?"0"+s:s,i=i<10?"0"+i:i;var r=a+"-"+s+"-"+i;this.day_start=new Date(r).getTime()-28800,this.day_end=new Date(r).getTime()+57600},formatNumber:function(t){return t=t.toString(),t[1]?t:"0"+t},formatTime:function(t,e){var a=new Date(t),s=[],i=["Y","M","D","h","m","s"];for(var r in s.push(a.getFullYear()),s.push(this.formatNumber(a.getMonth()+1)),s.push(this.formatNumber(a.getDate())),s.push(this.formatNumber(a.getHours())),s.push(this.formatNumber(a.getMinutes())),s.push(this.formatNumber(a.getSeconds())),s)e=e.replace(i[r],s[r]);return e}}},S=C,D=(a("0f8a"),Object(p["a"])(S,s,i,!1,null,null,null));e["default"]=D.exports},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"9aee":function(t,e,a){},ade3:function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return s}))}}]);