(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03858398"],{"0b5c":function(t,e,i){},5224:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("NavTo")],1),i("el-container",[i("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0"}},[i("Header")],1),i("el-main",{staticStyle:{"background-color":"#F3F3F3"}},[i("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[i("div",{staticClass:"article"},[i("el-row",[i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{size:"mini"},on:{click:t.jumpback}},[t._v("返回")]),t._v(" \n                ")],1),i("el-col",{attrs:{span:4}},[t._v("\n                 签到开启状态：\n                  "),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"开","inactive-text":"关","active-value":"1","inactive-value":"0"},on:{change:t.edit},model:{value:t.form_list[0].value,callback:function(e){t.$set(t.form_list[0],"value",e)},expression:"form_list[0].value"}})],1)],1),i("div",{staticStyle:{height:"20px"}},[t._v(" ")]),1==t.form_list[0].value?i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"列表",name:"1"}},[i("div",{staticClass:"fx-con"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[i("el-table-column",{attrs:{prop:"name",label:"名称",width:"380"}}),i("el-table-column",{attrs:{prop:"award",label:"奖励",width:"380"}}),i("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(i){return t.edit_get(e.row.id,e.row.award)}}},[t._v("修改")])]}}],null,!1,501231215)}),i("strong")],1),i("el-dialog",{attrs:{title:"修改奖励",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"奖励积分"}},[i("el-input",{model:{value:t.form.award,callback:function(e){t.$set(t.form,"award",e)},expression:"form.award"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.sub_add}},[t._v("确 定")])],1)],1)],1)])],1):t._e()],1)])],1)],1)],1),i("Pic",{ref:"child",attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length,iscg:t.is_cg}})],1)},s=[],l=(i("6b54"),i("ab56")),o=i("5c96"),n=i("6625"),c=i.n(n),r=i("a49b"),d=i("15fc"),h=i("71c2"),u=i("5898"),f={name:"Article",data:function(){return{form_list:[],activeName:"1",is_form_edit:0,img_list:[],drawer:!1,length:1,is_cg:0,edit_value:0,isedit:!1,dialogVisible:!1,tab_nav:1,dialogFormVisible:!1,myConfig:{autoHeightEnabled:!1,initialFrameHeight:420,initialFrameWidth:"100%",serverUrl:r["a"]+"index/admin/ue_uploads",UEDITOR_HOME_URL:this.$ue+"/static/UEditor/",toolbars:[["justifyleft","justifycenter","justifyright","justifyjustify","bold","forecolor","fontsize","source","insertimage"]]},options:[{value:1,label:"独立文章"},{value:2,label:"小程序跳转"},{value:3,label:"公告"},{value:4,label:"活动"},{value:5,label:"个人中心"}],oid:0,form:{id:"",award:0},formLabelWidth:"120px",list:[],is_form:!1}},components:{VueUeditorWrap:c.a,NavTo:d["a"],Header:h["a"],Pic:l["default"],Form:u["a"]},methods:{edit:function(){var t=this,e={id:this.form_list[0].id,data:this.form_list[0].value};this.http.post_show("cms/set_sys",e).then((function(e){t.$message({message:"操作成功",type:"success"}),t.get_config()}))},get_config:function(){var t=this;this.http.post_show("cms/get_config?type=12").then((function(e){t.form_list=e.data,console.log("form_list************************"),console.log(t.form_list),console.log("form_list************************")}))},jumpback:function(){this.$router.push({path:"/extend/application"})},changezhi:function(){this.activeName="1"},sub:function(t){var e=this,i=this,a=i.form;2==a["type"]&&(a["summary"]=a.appid,a["content"]=a.path),delete a.appid,delete a.path,this.http.post_show("article/admin/add_article",i.form).then((function(t){i.$message({showClose:!0,message:"添加成功",type:"success"}),i.tab_nav=1,e.btn_title="添加文章",i.clear_data(),i.getArticles()}))},sub_edit:function(t){var e=this,i=this,a=i.form;a["oid"]=i.oid,2==a["type"]&&(a["summary"]=a.appid,a["content"]=a.path),delete a.appid,delete a.path,this.http.post_show("article/admin/edit_article",a).then((function(t){i.$message({showClose:!0,message:"修改成功",type:"success"}),e.img_list=[],e.btn_title="添加文章",e.tab_nav=!1,i.clear_data(),i.getArticles()}))},sub_add:function(){var t=this;this.http.post("cms/play_award/update",this.form).then((function(e){console.log(e),e&&(t.dialogVisible=!1,t.clear_data(),t.get_wntable())}))},get_wntable:function(){var t=this;this.http.get("cms/play_award/get").then((function(e){t.list=e.data,console.log(t.list)}))},getArticles:function(){var t=this,e=o["Loading"].service({fullscreen:!0});this.http.get("article/admin/get_all_article").then((function(i){console.log(i.data),e.close();var a=i.status.toString();2==a.charAt(0)&&(t.list=i.data)}))},del:function(t,e){var i=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.http.put_show("wntable/del",{id:t}).then((function(t){i.$message({showClose:!0,message:"删除成功",type:"success"}),i.list.splice(e,1)}))}))},cancel:function(){console.log("点击取消"),this.dialogVisible=!1,this.dialogVisible_edit=!1,this.clear_data()},handleClose:function(){this.dialogVisible=!1,this.dialogVisible_edit=!1},onswitch:function(t){this.http.put_show("/cms/update",{id:t,db:"article",field:"is_hidden"}).then((function(t){console.log(t)}))},edit_get:function(t,e){console.log("enter****"),this.dialogVisible=!0,this.form.id=t,this.form.award=e},close_fun:function(t){this.clear_data(),t()},clear_data:function(){this.dialogFormVisible=!1,this.form.id="",this.form.award=""},get_img:function(t){for(var e in this.drawer=!1,t){var i=t[e];this.img_list.push(i),this.form.image=i.id}this.length=1-this.img_list.length,console.log("get_img_end:",t,this.img_list)},choose_pic:function(){this.length=1-this.img_list.length,this.drawer=!0},del_img:function(t){this.img_list.splice(t,1),this.form.image.splice(t,1)}},mounted:function(){this.get_wntable(),this.get_config()}},m=f,g=(i("8d28"),i("2877")),p=Object(g["a"])(m,a,s,!1,null,"6afacd1b",null);e["default"]=p.exports},"8d28":function(t,e,i){"use strict";i("0b5c")}}]);