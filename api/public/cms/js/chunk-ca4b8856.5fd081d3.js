(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca4b8856"],{"002d":function(t,e,o){},"2f21":function(t,e,o){"use strict";var n=o("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,o){"use strict";var n=o("5ca1"),a=o("d8e8"),i=o("4bf8"),s=o("79e5"),r=[].sort,l=[1,2,3];n(n.P+n.F*(s((function(){l.sort(void 0)}))||!s((function(){l.sort(null)}))||!o("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(i(this)):r.call(i(this),a(t))}})},"693d":function(t,e,o){"use strict";o("7a4e")},"7a4e":function(t,e,o){},e796:function(t,e,o){"use strict";o("002d")},ebad:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list"},[o("el-container",[o("el-aside",{attrs:{width:"200px"}},[o("NavTo")],1),o("el-container",{staticClass:"pro-list"},[o("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[o("Header")],1),o("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[o("el-main",{staticStyle:{"background-color":"#F3F3F3"}},[o("list-a",{attrs:{down:t.down}})],1)],1)],1)],1)],1)},a=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list-a"},[t.addShow?t._e():o("div",{staticClass:"tab-btn"},[o("el-button",{attrs:{size:"medium"},on:{click:t.all}},[t._v("在售商品")]),o("el-button",{attrs:{size:"medium"},on:{click:t.getDownPro}},[t._v("下架商品")])],1),o("div",[t.addShow?o("div",{staticClass:"add-category "},[o("Good",{attrs:{eid:t.eid},on:{emit_tg:t.emit_tg_list,back:t.back}})],1):t._e(),t.addShow?t._e():o("el-row",{staticStyle:{"margin-bottom":"35px"}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.on_add}},[t._v("发布商品")]),o("el-button",{attrs:{type:"warning",size:"small"},on:{click:t.sort_sub}},[t._v("更新排序")]),o("el-button",{attrs:{type:"success",size:"small"},on:{click:t.getProductList}},[t._v("刷新")]),o("el-input",{staticStyle:{width:"10%",margin:"10px"},attrs:{placeholder:"商品名称",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.serach()}},model:{value:t.search_form.name,callback:function(e){t.$set(t.search_form,"name",e)},expression:"search_form.name"}}),o("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择分类",size:"small"},model:{value:t.search_form.cate,callback:function(e){t.$set(t.search_form,"cate",e)},expression:"search_form.cate"}},t._l(t.cate_list,(function(t){return o("el-option",{key:t.value,attrs:{label:1==t.level?t.category_name:"--"+t.category_name,value:t.category_id}})})),1),o("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){return t.serach()}}},[t._v("搜索")])],1),t.addShow?t._e():o("el-row",[[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.product,border:"","default-sort":{prop:"sort",order:"ascending"}}},[o("el-table-column",{attrs:{prop:"sort",label:"排序",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.sort,callback:function(o){t.$set(e.row,"sort",o)},expression:"scope.row.sort"}})]}}],null,!1,900905939)}),o("el-table-column",{attrs:{label:"商品名称",width:"550"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticStyle:{display:"flex"}},[e.row.imgs?o("div",{staticClass:"product-img"},[o("img",{attrs:{src:t.$getimg+e.row.imgs}})]):t._e(),o("div",{staticClass:"product-mes"},[o("p",[t._v(t._s(e.row.goods_name))]),o("p",[t._v(t._s(e.row.description))])])])]}}],null,!1,3715628569)}),o("el-table-column",{attrs:{prop:"price",label:"价格",sortable:""}}),o("el-table-column",{attrs:{prop:"stock",label:"总库存",sortable:""}}),o("el-table-column",{attrs:{prop:"sales",label:"销量",sortable:""}}),o("el-table-column",{attrs:{label:"是否热销",width:"100",prop:"is_hot",filters:[{text:"是",value:!0},{text:"否",value:!1}],"filter-method":t.filterHandler},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(o){return t.set_hot(e.row.goods_id)}},model:{value:e.row.is_hot,callback:function(o){t.$set(e.row,"is_hot",o)},expression:"scope.row.is_hot"}})]}}],null,!1,762428361)}),o("el-table-column",{attrs:{label:"是否新品",prop:"is_new",width:"100",filters:[{text:"是",value:!0},{text:"否",value:!1}],"filter-method":t.filterHandler},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(o){return t.set_new(e.row.goods_id)}},model:{value:e.row.is_new,callback:function(o){t.$set(e.row,"is_new",o)},expression:"scope.row.is_new"}})]}}],null,!1,55133129)}),o("el-table-column",{attrs:{label:"是否下架",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-color":"#DCDFE6","inactive-color":"#F56C6C"},on:{change:function(o){return t.set_down(e.row.goods_id,e.$index)}},model:{value:e.row.state,callback:function(o){t.$set(e.row,"state",o)},expression:"scope.row.state"}})]}}],null,!1,3562652848)}),o("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"success",size:"small"},on:{click:function(o){return t.on_edit(e.row.goods_id)}}},[t._v("编辑\n\t\t\t\t\t\t\t")]),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(o){return t.del(e.row.goods_id,e.$index)}},slot:"reference"},[t._v("删除")])]}}],null,!1,1084889708)})],1)],o("el-pagination",{staticStyle:{"padding-top":"60px","text-align":"center"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}})],2)],1)])},s=[],r=(o("ac4d"),o("8a81"),o("5df3"),o("1c4c"),o("6b54"),o("55dd"),o("7f7f"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o(t.comview,{tag:"component",attrs:{eid:t.eid},on:{emit_tangou:t.emit_tg,back:t.back}})],1)}),l=[],c=(o("5c96"),o("a49b"),o("7370")),u={name:"Good",props:["eid"],data:function(){return{comview:""}},components:{Pro:c["a"]},methods:{back:function(){this.$emit("back")},emit_tg:function(){this.$emit("emit_tg")}},mounted:function(){this.comview="Pro"}},d=u,f=o("2877"),h=Object(f["a"])(d,r,l,!1,null,null,null),p=h.exports;function m(t,e){var o="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_(t))||e&&t&&"number"===typeof t.length){o&&(t=o);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return s=t.done,t},e:function(t){r=!0,i=t},f:function(){try{s||null==o.return||o.return()}finally{if(r)throw i}}}}function _(t,e){if(t){if("string"===typeof t)return g(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}var v={name:"List-b",props:["down"],data:function(){return{search_form:{name:null,cate:null},cate_list:[],search_cate:"",options:[],getimg:this.$getimg,allB:"",value:"",inpue:"",visible2:!1,product:[],addShow:!1,eid:0,size:8,total:0,is_hot:!0}},components:{Good:p},mounted:function(){this.getProductList(),this.all(),this.get_all_cate()},methods:{serach:function(){var t=[];if(this.search_form.name){var e,o=m(this.allB);try{for(o.s();!(e=o.n()).done;){var n=e.value,a=n.goods_name.indexOf(this.search_form.name);a>=0&&t.push(n)}}catch(r){o.e(r)}finally{o.f()}}if(this.search_form.cate)for(var i in this.allB){var s=this.allB[i];s.category_id==this.search_form.cate&&t.push(s)}this.product=t},filterHandler:function(t,e,o){var n=o["property"];return e[n]===t},sort_sub:function(){var t=this,e={},o=this;console.log("pro:",o.product);var n,a=m(o.product);try{for(a.s();!(n=a.n()).done;){var i=n.value;e[i.goods_id]=i.sort}}catch(s){a.e(s)}finally{a.f()}this.http.post_show("product/admin/set_sort",e).then((function(e){t.$message({message:"操作成功",type:"success"}),t.all()}))},all:function(){var t=this;this.value="",this.http.post("product/admin/get_product").then((function(e){t.total=e.data.length,t.allB=e.data,t.product=e.data.slice(0,t.size)}))},jump_page:function(t){var e=this,o=(t-1)*e.size,n=t*e.size;console.log(o,n),this.product=this.allB.slice(o,n)},on_add:function(){this.addShow=!0,this.eid=0},on_edit:function(t){this.addShow=!0,this.eid=t},back:function(){this.order_id=0,this.addShow=!1,this.getProductList()},getProductList:function(){var t=this;this.http.post("product/admin/all_goods_info").then((function(e){t.allB=e.data,t.product=e.data.slice(0,t.size),t.total=e.data.length}))},get_all_cate:function(){var t=this;this.http.get("category/admin/all_category").then((function(e){t.cate_list=e.data}))},getDownPro:function(){var t=this;this.http.post("product/admin/get_products_down").then((function(e){t.allB=e.data,t.product=e.data,t.total=e.data.length}))},del:function(t,e){var o=this,n=this;localStorage.getItem("oauth");this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.http.put_show("product/admin/del_product",{id:t}).then((function(t){n.$message({showClose:!0,message:"删除成功",type:"success"}),n.product.splice(e,1),o.getProductList()}))}))},set_hot:function(t){this.http.put_show("cms/update",{id:t,db:"goods",field:"is_hot"}).then((function(t){console.log(t)}))},set_new:function(t){this.http.put_show("cms/update",{id:t,db:"goods",field:"is_new"}).then((function(t){console.log(t)}))},set_down:function(t,e){var o=this;this.http.put_show("cms/update",{id:t,db:"goods",field:"state"}).then((function(t){o.$message({message:"成功",type:"success"}),o.product.splice(e,1)}))},emit_tg_list:function(){this.addShow=!1,this.eid=0,this.getProductList()}}},w=v,b=(o("693d"),Object(f["a"])(w,i,s,!1,null,"2d47c1e2",null)),y=b.exports,k=o("15fc"),x=o("71c2"),S={data:function(){return{activeName:"first",visible2:!1,product:[],addShow:!1,down:!1,eid:0,page:[],drawer:!1}},components:{ListA:y,NavTo:k["a"],Header:x["a"]},methods:{emit_one:function(){console.log(123)}},mounted:function(){}},$=S,F=(o("e796"),Object(f["a"])($,n,a,!1,null,"5e912d2c",null));e["default"]=F.exports}}]);