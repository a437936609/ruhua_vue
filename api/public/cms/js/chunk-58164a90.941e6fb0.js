(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58164a90"],{"20bb":function(t,e,i){"use strict";i("d812")},"83a6":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("NavTo")],1),i("el-container",[i("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0"}},[i("Header")],1),i("el-main",{staticStyle:{"background-color":"#F3F3F3"}},[i("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[i("div",{staticClass:"article"},[t.is_form?t._e():i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.ontab_nav}},[t._v(t._s(t.btn_title))]),i("div",{staticStyle:{height:"20px"}},[t._v(" ")]),2==t.tab_nav?[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})})),1)],1),i("el-form-item",{attrs:{label:"文章标题","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"文章缩略图","label-width":t.formLabelWidth}},[t.img_list.length<1?i("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small",type:"primary"},on:{click:t.choose_pic}},[t._v("选择图片")]):t._e(),[t.img_list.length>0?[i("div",{staticStyle:{display:"flex",width:"700px","flex-wrap":"wrap"}},[t._l(t.img_list,(function(e,a){return[t.img_list.length>0?i("div",{staticClass:"picA"},[i("img",{staticClass:"img",attrs:{src:t.$getimg+e.url}}),i("i",{staticClass:"el-icon-circle-close",on:{click:function(e){return t.del_img(a)}}})]):t._e()]}))],2)]:t._e()]],2),2==t.form.type?[i("el-form-item",{attrs:{label:"Appid","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"必填","auto-complete":"off"},model:{value:t.form.appid,callback:function(e){t.$set(t.form,"appid",e)},expression:"form.appid"}})],1),i("el-form-item",{attrs:{label:"路径","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"选填","auto-complete":"off"},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1)]:t._e(),i("el-form-item",{attrs:{label:"文章内容","label-width":t.formLabelWidth}},[i("vue-ueditor-wrap",{attrs:{config:t.myConfig},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],2),i("div",{staticClass:"dialog-footer"},[t.isedit?i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sub_edit("form")}}},[t._v("修 改")]):i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sub("form")}}},[t._v("确 定")])],1)],1)],1)]:t._e(),1==t.tab_nav?[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),i("el-table-column",{attrs:{prop:"title",label:"文章标题",width:"380"}}),i("el-table-column",{attrs:{label:"文章图片",width:"200%"}}),i("el-table-column",{attrs:{label:"类别",width:"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(t.options,(function(a){return[e.row.type==a.value?i("p",[t._v(t._s(a.label))]):t._e()]}))]}}],null,!1,2894844195)}),i("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"100%"}}),i("el-table-column",{attrs:{prop:"is_hidden",label:"隐藏",width:"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":1,"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(i){return t.onswitch(e.row.id)}},model:{value:e.row.is_hidden,callback:function(i){t.$set(e.row,"is_hidden",i)},expression:"scope.row.is_hidden"}})]}}],null,!1,2830031343)}),i("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(i){return t.edit_get(e.row.id)}}},[t._v("修改")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(i){return t.del(e.row.id,e.$index)}},slot:"reference"},[t._v("删除")])]}}],null,!1,1742683313)}),i("strong")],1)]:t._e(),1==t.tab_nav?i("el-button",{staticStyle:{"margin-top":"10px"},attrs:{slot:"reference",type:"success",size:"small"},slot:"reference"},[t._v("提交排序")]):t._e()],2)])],1)],1)],1),i("Pic",{ref:"child",attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length,iscg:t.is_cg}})],1)},l=[],o=i("ab56"),s=i("5c96"),n=i("6625"),r=i.n(n),c=i("a49b"),d=i("15fc"),m=i("71c2"),u=i("5898"),f={name:"Article",data:function(){return{is_form_edit:0,img_list:[],drawer:!1,length:1,is_cg:0,btn_title:"添加文章",form_btn:"添加表单",isedit:!1,tab_nav:1,dialogFormVisible:!1,myConfig:{autoHeightEnabled:!1,initialFrameHeight:420,initialFrameWidth:"100%",serverUrl:c["a"]+"index/admin/ue_uploads",UEDITOR_HOME_URL:this.$ue+"/static/UEditor/",toolbars:[["justifyleft","justifycenter","justifyright","justifyjustify","bold","forecolor","fontsize","source","insertimage"]]},options:[{value:1,label:"独立文章"},{value:2,label:"小程序跳转"},{value:3,label:"公告"},{value:4,label:"活动"},{value:5,label:"个人中心"}],oid:0,form:{title:"",content:"",type:"",appid:"",path:"",image:[]},formLabelWidth:"120px",list:[],is_form:!1}},components:{VueUeditorWrap:r.a,NavTo:d["a"],Header:m["a"],Pic:o["default"],Form:u["a"]},mounted:function(){this.getArticles()},methods:{show_form:function(){"添加表单"==this.form_btn?(this.form_btn="返回",this.is_form=!0,this.tab_nav=3):("文章列表"==this.btn_title&&(this.btn_title="添加文章"),this.form_btn="添加表单",this.tab_nav=1,this.is_form=!1)},ontab_nav:function(){this.isedit=!1,2==this.tab_nav?(this.btn_title="添加文章",this.tab_nav=1,this.clear_data()):(this.btn_title="文章列表",console.log(111),this.tab_nav=2,this.clear_data())},sub:function(t){var e=this,i=this,a=i.form;2==a["type"]&&(a["summary"]=a.appid,a["content"]=a.path),delete a.appid,delete a.path,this.http.post_show("article/admin/add_article",i.form).then((function(t){i.$message({showClose:!0,message:"添加成功",type:"success"}),i.tab_nav=1,e.btn_title="添加文章",i.clear_data(),i.getArticles()}))},sub_edit:function(t){var e=this,i=this,a=i.form;a["oid"]=i.oid,2==a["type"]&&(a["summary"]=a.appid,a["content"]=a.path),delete a.appid,delete a.path,this.http.post_show("article/admin/edit_article",a).then((function(t){i.$message({showClose:!0,message:"修改成功",type:"success"}),e.img_list=[],e.btn_title="添加文章",e.tab_nav=1,i.clear_data(),i.getArticles()}))},getArticles:function(){var t=this,e=s["Loading"].service({fullscreen:!0});this.http.get("article/admin/get_all_article").then((function(i){console.log(i.data),e.close(),t.list=i.data}))},del:function(t,e){var i=this,a=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.http.put_show("article/admin/del_article",{id:t}).then((function(t){a.$message({showClose:!0,message:"删除成功",type:"success"}),a.list.splice(e,1)}))}))},onswitch:function(t){this.http.put_show("/cms/update",{id:t,db:"article",field:"is_hidden"}).then((function(t){console.log(t)}))},edit_get:function(t){var e=this,i=this;this.http.get_show("article/get_one_article?id="+t).then((function(t){i.btn_title="文章列表",i.form.title=t.data.title,i.form.content=t.data.content,i.form.type=t.data.type,2==t.data.type&&(i.form.appid=t.data.summary,i.form.path=t.data.content),e.img_list.push(t.data.img),i.isedit=!0,i.oid=t.data.id,i.tab_nav=2}))},close_fun:function(t){this.clear_data(),t()},clear_data:function(){this.img_list=[],this.dialogFormVisible=!1,this.form.type="",this.form.title="",this.form.content="",this.oid=0},get_img:function(t){for(var e in this.drawer=!1,t){var i=t[e];this.img_list.push(i),this.form.image=i.id}this.length=1-this.img_list.length,console.log("get_img_end:",t,this.img_list)},choose_pic:function(){this.length=1-this.img_list.length,this.drawer=!0},del_img:function(t){this.img_list.splice(t,1),this.form.image.splice(t,1)}}},h=f,p=(i("20bb"),i("2877")),_=Object(p["a"])(h,a,l,!1,null,"61d1c85a",null);e["default"]=_.exports},d812:function(t,e,i){}}]);