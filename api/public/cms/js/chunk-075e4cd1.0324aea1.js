(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-075e4cd1"],{"1ad9":function(t,e,i){},"75eb":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"apply"},[i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("NavTo")],1),i("el-container",[i("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[i("Header")],1),i("div",[i("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[i("el-main",[i("div",{staticClass:"article"},[i("div",{staticStyle:{"text-align":"left"}},[i("el-button",{on:{click:t.jumpback}},[t._v("返回")]),t._v("  \n\t\t\t \t\t\t"),i("el-button",{attrs:{type:"primary"},on:{click:t.add_game}},[t._v("添加规则")]),i("div",{staticStyle:{height:"20px"}},[t._v(" ")])],1),[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),i("el-table-column",{attrs:{prop:"nav.url_name",label:"名称"}}),i("el-table-column",{attrs:{prop:"img_id",label:"导航图标",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{staticClass:"navimg",attrs:{src:t.getimg+e.row.img_id}})]}}])}),i("el-table-column",{attrs:{prop:"content",label:"奖励"}}),i("el-table-column",{attrs:{prop:"value",label:"概率"}}),i("el-table-column",{attrs:{prop:"scope",label:"库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.stock<0?i("p",[t._v("无限")]):i("p",[t._v(t._s(e.row.stock))])]}}])}),i("el-table-column",{attrs:{prop:"type",label:"奖励"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.type?i("p",[t._v("积分")]):t._e(),2==e.row.type?i("p",[t._v("谢谢参与")]):t._e(),1==e.row.type?i("p",[t._v("其它")]):t._e()]}}])}),i("el-table-column",{attrs:{prop:"points",label:"奖励积分"}}),i("el-table-column",{attrs:{prop:"operation",label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"infor",size:"small"},on:{click:function(i){return t.update(e.row.id,e.$index)}},slot:"reference"},[t._v("修改")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(i){return t.del(e.row.id)}},slot:"reference"},[t._v("删除")])]}}])}),i("strong")],1)]],2)])],1)],1),i("el-dialog",{attrs:{title:t.edit_title,visible:t.is_disLogshow,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.is_disLogshow=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"类型"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{attrs:{label:"奖励内容"}},[i("el-input",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),0==t.form.type?i("el-form-item",{attrs:{label:"奖励积分"}},[i("el-input",{model:{value:t.form.points,callback:function(e){t.$set(t.form,"points",e)},expression:"form.points"}})],1):t._e(),i("el-form-item",{attrs:{label:"概率"}},[i("el-input",{model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}})],1),i("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"库存"}},[i("el-radio",{attrs:{label:0,border:"",size:"medium"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}},[t._v("不限")]),i("el-radio",{attrs:{label:1,border:"",size:"medium"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}},[t._v("有限")])],1),1==t.stock?i("el-form-item",{attrs:{label:"库存量"}},[i("el-input",{model:{value:t.form.stock,callback:function(e){t.$set(t.form,"stock",e)},expression:"form.stock"}})],1):t._e(),i("el-form-item",{attrs:{label:"图标","label-width":t.formLabelWidth}},[t.img_list.length>0?[i("div",{staticStyle:{display:"flex",width:"530px","flex-wrap":"wrap"}},[t._l(t.img_list,(function(e,a){return[i("i",{staticClass:"el-icon-circle-close",on:{click:function(e){return t.delimg(a)}}}),t.img_list.length>0?i("div",{staticClass:"picA"},[i("img",{staticClass:"img",attrs:{src:t.getimg+t.form.img_id}})]):t._e()]}))],2)]:t._e(),t.img_list.length<1?i("div",{staticClass:"picA",staticStyle:{"margin-left":"19px"},on:{click:t.choose_pic}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"margin-top":"45%",height:"28px",width:"28px"}})]):t._e()],2)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.sub_add}},[t._v("确 定")])],1)],1)],1)],1),i("Pic",{attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length}})],1)},s=[],l=(i("5c96"),i("15fc")),o=i("71c2"),r=i("ab56"),n=(i("a49b"),{data:function(){return{is_add:!0,is_disLogshow:!1,edit_title:"添加",progsuc:-1,percentage:0,tableData:[],formLabelWidth:"120px",getimg:this.$getimg,stock:0,form:{id:"",gid:"",content:"",value:"",stock:"",type:"",points:"",img_id:""},options:[{label:"积分",value:0},{label:"其它",value:1},{label:"谢谢参与",value:2}],length:1,drawer:!1,img_list:[]}},components:{Header:o["a"],NavTo:l["a"],Pic:r["default"]},mounted:function(){var t=this.$route.query.id;this.form.gid=t,this._load(t)},methods:{jumpback:function(){this.$router.push({path:"/extend/dzplist"})},get_data:function(t){var e=this;this.http.get("games/get_dzp_rule?id="+t).then((function(t){console.log(t),e.tableData=t.data}))},_load:function(t){this.get_data(t)},del:function(t){var e=this;this.http.del("games/del_game_rule?id="+t).then((function(t){e.get_data(e.form.gid)}))},get_img:function(t){for(var e in this.drawer=!1,t){var i=t[e];this.img_list.push(i),this.form.img_id=i.url}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list)},to_choose_img:function(){this.drawer=!this.drawer},is_show:function(){this.drawer=!this.drawer},choose_pic:function(){this.length=6-this.img_list.length,this.drawer=!0},clear_data:function(){this.form.id="",this.form.content="",this.form.value=0,this.form.stock=0,this.form.type=0,this.form.points=0,this.form.img_id="",this.img_list=[]},customColorMethod:function(t){return t<30?"#909399":t<70?"#e6a23c":"#67c23a"},add_game:function(){this.clear_data(),this.is_disLogshow=!0},cancel:function(){this.is_disLogshow=!1},delimg:function(t){this.img_list.splice(t,1)},sub_add:function(){var t=this;this.is_add?this.http.post("games/add_dzp_rule",this.form).then((function(e){200==e.data.status&&t.$message({type:"success",message:"添加成功!"}),t.clear_data(),t.get_data(t.form.gid),t.is_disLogshow=!1})):this.http.post("games/update_dzp_rule",this.form).then((function(e){200==e.data.status&&t.$message({type:"success",message:"添加成功!"}),t.clear_data(),t.is_disLogshow=!1,t.get_data(t.form.gid)}))},update:function(t,e){this.img_list=[],console.log(e),this.form.id=this.tableData[e].id,this.form.content=this.tableData[e].content,this.form.value=this.tableData[e].value,this.form.stock=this.tableData[e].stock,this.form.type=this.tableData[e].type,this.form.points=this.tableData[e].points,this.form.img_id=this.tableData[e].img_id,this.img_list.push(this.form.img_id),this.is_disLogshow=!0,this.is_add=!1,this.edit_title="编辑"}}}),c=n,d=(i("8868"),i("2877")),m=Object(d["a"])(c,a,s,!1,null,"0ed42580",null);e["default"]=m.exports},8868:function(t,e,i){"use strict";i("1ad9")}}]);