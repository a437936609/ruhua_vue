(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03c72994"],{"02b2":function(t,e,i){},"2f21":function(t,e,i){"use strict";var a=i("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},4275:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"category"}},[i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("NavTo")],1),i("el-container",{},[i("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[i("Header")],1),i("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[i("el-main",{staticStyle:{"background-color":"#F3F3F3"}},[i("div",{staticClass:"category"},[i("AddCategory",{attrs:{nav_list:t.list},on:{up_parent:t.up_list}}),i("el-dialog",{attrs:{title:"",visible:t.editbox,width:"35%",center:""},on:{"update:visible":function(e){t.editbox=e},close:t.close}},[i("el-form",{attrs:{model:t.editform}},[i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"导航名称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editform.nav_name,callback:function(e){t.$set(t.editform,"nav_name",e)},expression:"editform.nav_name"}})],1),i("el-form-item",{attrs:{label:"跳转到","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择跳转地址"},on:{change:t.get_jump_url},model:{value:t.editform.url_name,callback:function(e){t.$set(t.editform,"url_name",e)},expression:"editform.url_name"}},t._l(t.list,(function(t){return i("el-option",{attrs:{value:t,label:t.name}})})),1)],1),"分类"==t.editform.url_name?i("el-form-item",{attrs:{label:"选择分类","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择跳转的分类"},on:{change:t.creat_url},model:{value:t.editform.category,callback:function(e){t.$set(t.editform,"category",e)},expression:"editform.category"}},t._l(t.category_nav,(function(e){return i("el-option",{attrs:{value:e.category_id,label:e.category_name}},[0!=e.pid?i("span",[t._v("  |--"+t._s(e.category_name))]):t._e()])})),1)],1):t._e(),"其他小程序"==t.editform.url_name?[i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"appID","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editform.other,callback:function(e){t.$set(t.editform,"other",e)},expression:"editform.other"}})],1),i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"路径","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editform.url,callback:function(e){t.$set(t.editform,"url",e)},expression:"editform.url"}})],1)]:t._e(),i("el-form-item",{attrs:{label:"选择图片","label-width":t.formLabelWidth}},[t.editform.img_id?i("div",{staticStyle:{display:"flex",width:"530px","flex-wrap":"wrap"}},[i("i",{staticClass:"el-icon-circle-close",on:{click:t.delimg}}),i("div",{staticClass:"picA",on:{click:t.choose_pic}},[i("img",{staticClass:"img",attrs:{src:t.getimg+t.editform.img_id}})])]):i("div",{staticClass:"picA",staticStyle:{"margin-left":"19px"},on:{click:t.choose_pic}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"margin-top":"45%",height:"28px",width:"28px"}})])])],2),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editbox=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit(t.editindex)}}},[t._v("确 定")])],1)],1),[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.category,border:""}},[i("el-table-column",{attrs:{prop:"",label:"排序",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.sort,callback:function(i){t.$set(e.row,"sort",i)},expression:"scope.row.sort"}})]}}])}),i("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),i("el-table-column",{attrs:{prop:"nav_name",label:"导航名称"}}),i("el-table-column",{attrs:{prop:"img_id",label:"导航图标",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{staticClass:"navimg",attrs:{src:t.getimg+e.row.img_id}})]}}])}),i("el-table-column",{attrs:{prop:"url",label:"跳转路径"}}),i("el-table-column",{attrs:{prop:"level",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(i){return t.onedit(e.$index)}}},[t._v("修改")]),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){return t.del(e.row.id,e.$index)}}},[t._v("删除")])]}}])})],1)],i("div",{staticClass:"sort_btn"},[i("el-button",{attrs:{type:"success",size:"small"},on:{click:t.sort_sub}},[t._v("提交排序")])],1)],2)])],1)],1)],1),i("Pic",{attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length}})],1)},o=[],l=(i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("6b54"),i("55dd"),i("7f7f"),i("5c96"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-cate"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addbox=!0}}},[t._v("添加导航")]),i("div",{staticStyle:{height:"10px"}}),i("el-dialog",{attrs:{title:"",visible:t.addbox,width:"35%",center:""},on:{"update:visible":function(e){t.addbox=e},close:t.close}},[i("el-form",{attrs:{model:t.addform}},[i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"导航名称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addform.nav_name,callback:function(e){t.$set(t.addform,"nav_name",e)},expression:"addform.nav_name"}})],1),i("el-form-item",{attrs:{label:"跳转到","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择跳转地址"},on:{change:t.get_jump_url},model:{value:t.addform.url_name,callback:function(e){t.$set(t.addform,"url_name",e)},expression:"addform.url_name"}},t._l(t.list,(function(t){return i("el-option",{attrs:{value:t,label:t.name}})})),1)],1),"其他小程序"==t.addform.url_name?[i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"appID","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addform.other,callback:function(e){t.$set(t.addform,"other",e)},expression:"addform.other"}})],1),i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"路径","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addform.url,callback:function(e){t.$set(t.addform,"url",e)},expression:"addform.url"}})],1)]:t._e(),"文章"==t.addform.url_name?i("el-form-item",{attrs:{label:"选择文章","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择跳转的文章"},on:{change:t.choose_article},model:{value:t.addform.category,callback:function(e){t.$set(t.addform,"category",e)},expression:"addform.category"}},t._l(t.all_article,(function(t){return i("el-option",{attrs:{value:t.id,label:t.title}})})),1)],1):t._e(),"分类"==t.addform.url_name?i("el-form-item",{attrs:{label:"选择分类","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择跳转的分类"},on:{change:t.creat_url},model:{value:t.addform.category,callback:function(e){t.$set(t.addform,"category",e)},expression:"addform.category"}},t._l(t.category,(function(e){return i("el-option",{attrs:{value:e.category_id,label:e.category_name}},[0!=e.pid?i("span",[t._v("  |--"+t._s(e.category_name))]):t._e()])})),1)],1):t._e(),i("el-form-item",{attrs:{label:"导航图标","label-width":t.formLabelWidth}},[t.img_list.length>0?[i("div",{staticStyle:{display:"flex",width:"530px","flex-wrap":"wrap"}},[t._l(t.img_list,(function(e,a){return[i("i",{staticClass:"el-icon-circle-close",on:{click:function(e){return t.delimg(a)}}}),t.img_list.length>0?i("div",{staticClass:"picA"},[i("img",{staticClass:"img",attrs:{src:t.getimg+e.url}})]):t._e()]}))],2)]:t._e(),t.img_list.length<1?i("div",{staticClass:"picA",staticStyle:{"margin-left":"19px"},on:{click:t.choose_pic}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"margin-top":"45%",height:"28px",width:"28px"}})]):t._e()],2)],2),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addbox=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1),i("Pic",{attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length}})],1)}),r=[],n=i("a49b"),s=i("ab56"),c={name:"Category",props:{nav_list:Array},data:function(){return{category:[],list:[],length:1,drawer:!1,getimg:this.$getimg,img_list:[],addbox:!1,addform:{nav_name:"",img_id:"",url_name:"",url:"",category:""},formLabelWidth:"120px",upfile_url:n["a"]+"/admin/upload/img",upfile_data:{use:"category"},upfile_head:{token:localStorage.getItem("token")},upfile_list:[],show_appid_input:0,all_article:[]}},components:{Pic:s["default"]},mounted:function(){this.list=this.nav_list,this.getCategory(),this.get_all_article()},methods:{get_all_article:function(){var t=this;this.http.get("article/admin/get_all_article").then((function(e){t.all_article=e.data}))},getCategory:function(){var t=this,e=this;this.http.get("category/admin/all_category").then((function(i){i.data.length>0?e.category=i.data:t.$message({showClose:!0,message:"请先创建商品分类",type:"warning"})}))},creat_url:function(t){console.log(t),this.addform.url="/pages/extend-view/productList/productList?cid="+t+"&sid=0",console.log(this.addform.url)},choose_article:function(t){this.addform.url="/pages/article/article?id="+t},close:function(){this.img_list=[],this.addform={nav_name:"",img_id:"",url_name:"",url:""}},get_jump_url:function(t){console.log(t),this.addform.url=t.url,this.addform.url_name=t.name},onSubmit:function(){var t=this;console.log(this.addform),this.http.post_show("nav/admin/add_nav",t.addform).then((function(e){for(var i in t.$message({showClose:!0,message:"新增成功",type:"success"}),t.addbox=!1,t.addform)t.addform[i]="";t.upfile_list=[],t.$emit("up_parent"),t.img_list=[]}))},get_img:function(t){for(var e in this.drawer=!1,t){var i=t[e];this.img_list.push(i),this.addform.img_id=i.url}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list)},choose_pic:function(){this.length=6-this.img_list.length,this.drawer=!0},is_show:function(){this.drawer=!this.drawer},delimg:function(t){this.img_list.splice(t,1)},up_ok:function(t){201==t.code&&(this.addform.img_id=t.id)}}},d=c,u=(i("b525"),i("2877")),m=Object(u["a"])(d,l,r,!1,null,"7ac7d0dd",null),f=m.exports,h=i("15fc"),g=i("71c2");function p(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,n=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){n=!0,l=t},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw l}}}}function _(t,e){if(t){if("string"===typeof t)return b(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var y={name:"Category",components:{AddCategory:f,NavTo:h["a"],Header:g["a"],Pic:s["default"]},data:function(){return{show_appid_input:0,list:[{id:1,name:"签到",url:"/means/qiandao/qiandao"},{id:2,name:"积分",url:"/means/point/point"},{id:3,name:"秒杀",url:"/means/miaosha/miaosha"},{id:4,name:"限时折扣",url:"/means/discount/discount"},{id:16,name:"一元团购",url:"/means/onebuy/onebuy"},{id:5,name:"拼团",url:"/means/pin/pin"},{id:6,name:"直播",url:"/pages/zhibo/zhibo"},{id:7,name:"文章",url:"/pages/article/article?id="},{id:8,name:"优惠券",url:"/means/coupon/coupon"},{id:9,name:"分销商品",url:"/pages/extend-view/productList/productList?type=fx"},{id:10,name:"视频购",url:"/pages/zhibo/zhibo"},{id:13,name:"种树",url:"/means/play/watering/watering"},{id:15,name:"分类",url:"/pages/extend-view/productList/productList"},{id:14,name:"其他小程序",url:"",other:""}],length:1,drawer:!1,getimg:this.$getimg,img_list:[],input:"",category:[],category_nav:[],category_top:[],dialogTableVisible:!1,editbox:!1,editform:{nav_name:"",url_name:"",img_id:"",url:""},formLabelWidth:"120px",editindex:0,upfile_url:n["a"]+"/admin/upload/img",upfile_data:{use:"category"},upfile_head:{token:localStorage.getItem("token")}}},methods:{creat_url:function(t){console.log(t),this.editform.url="/pages/extend-view/productList/productList?cid="+t+"&sid=0"},close:function(){this.editform={nav_name:"",url_name:"",img_id:"",url:""},this.img_list=[]},getCategory:function(){var t=this,e=this;this.http.get("nav/admin/all_nav").then((function(t){e.category=t.data})),this.http.get("category/admin/all_category").then((function(i){i.data.length>0?(e.category_nav=i.data,console.log(e.category_nav)):t.$message({showClose:!0,message:"请先创建商品分类",type:"warning"})}))},to_choose_img:function(){this.drawer=!this.drawer},is_show:function(){this.drawer=!this.drawer},get_img:function(t){for(var e in this.drawer=!1,t){var i=t[e];this.img_list.push(i),this.editform.img_id=i.url}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list)},choose_pic:function(){this.length=6-this.img_list.length,this.drawer=!0},delimg:function(){this.editform.img_id=""},get_jump_url:function(t){console.log(t),this.editform.url=t.url,this.editform.url_name=t.name},del:function(t,e){var i=this,a=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.http.put_show("nav/admin/del_nav",{id:t}).then((function(t){return a.$message({showClose:!0,message:"删除成功",type:"success"}),a.category.splice(e,1),!1}))}))},onedit:function(t){this.editform=this.category[t],this.category[t].other&&(this.editform.other=this.category[t].other),this.editindex=t,this.editbox=!0,console.log(this.editform)},up_list:function(){this.getCategory()},sort_sub:function(){var t,e=this,i={},a=this,o=p(a.category);try{for(o.s();!(t=o.n()).done;){var l=t.value;i[l.id]=l.sort}}catch(r){o.e(r)}finally{o.f()}this.http.post_show("nav/admin/set_sort",i).then((function(t){e.$message({message:"操作成功",type:"success"})}))},onSubmit:function(){var t=this,e=this;console.log("nav_data******************"),console.log(e.editform),console.log("nav_data******************"),this.http.post_show("nav/admin/edit_nav",e.editform).then((function(i){t.$message({message:"修改成功",type:"success"}),e.editbox=!1,e.getCategory()}))},onswitch:function(t){this.http.put_show("/cms/update",{id:t,db:"category",field:"is_visible"}).then((function(t){console.log(t)}))},up_ok:function(t){201==t.code&&(this.editform.category_pic=t.id)}},mounted:function(){this.getCategory()}},v=y,w=(i("f9a4"),Object(u["a"])(v,a,o,!1,null,"29d28a0d",null));e["default"]=w.exports},"55dd":function(t,e,i){"use strict";var a=i("5ca1"),o=i("d8e8"),l=i("4bf8"),r=i("79e5"),n=[].sort,s=[1,2,3];a(a.P+a.F*(r((function(){s.sort(void 0)}))||!r((function(){s.sort(null)}))||!i("2f21")(n)),"Array",{sort:function(t){return void 0===t?n.call(l(this)):n.call(l(this),o(t))}})},b525:function(t,e,i){"use strict";i("d582")},d582:function(t,e,i){},f9a4:function(t,e,i){"use strict";i("02b2")}}]);