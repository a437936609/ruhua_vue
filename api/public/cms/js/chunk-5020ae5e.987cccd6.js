(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5020ae5e"],{"62af":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"estimate"},[a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("NavTo")],1),a("el-container",[a("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[a("Header")],1),a("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[a("el-main",[a("div",{staticClass:"article"},[a("el-button",{on:{click:t.jumpback}},[t._v("返回")]),a("div",{staticStyle:{height:"20px"}},[t._v(" ")]),a("div",{staticClass:"xiao"},[t._v("选择商品")]),a("div",{staticClass:"add"},[a("el-tabs",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"border-card"},model:{value:t.active_name,callback:function(e){t.active_name=e},expression:"active_name"}},[a("el-tab-pane",{attrs:{label:"第一步：选择商品",name:"one"}},[a("div",{staticClass:"choose"},[a("div",{staticClass:"search"},[a("el-input",{staticStyle:{width:"15%","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入商品名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search_fx(t.fx_search_key)}},model:{value:t.fx_search_key,callback:function(e){t.fx_search_key=e},expression:"fx_search_key"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.search_fx(t.fx_search_key)}}},[t._v("搜索")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:t.reset}},[t._v("重置")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataA}},[a("el-table-column",{attrs:{prop:"",label:"商品信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"pro"},[a("div",{staticClass:"pro_02"},[a("img",{attrs:{src:t.$getimg+e.row.imgs}})]),a("div",{staticClass:"pro_03"},[a("div",{staticClass:"pro_03_1"},[t._v(t._s(e.row.goods_name))]),a("div",{staticClass:"pro_03_2"},[t._v("¥"+t._s(e.row.price))])])])]}}])}),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.is_reseller?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.join(e.row,e.$index)}}},[t._v("添加评价")]):t._e(),1==e.row.is_reseller?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(a){return t.cancel(e.$index,e.row.goods_id)}},slot:"reference"},[t._v("取消")]):t._e()]}}])})],1)],1),a("div",{staticClass:"quan"},[a("div",{staticClass:"quan_l"},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small"},on:{click:t.quanxuan}},[t._v("全选")])],1)])]),1==t.is_two?a("el-tab-pane",{attrs:{label:"第二步：设置评价",name:"two"}},[a("div",{staticClass:"choose"},[a("div",{staticClass:"xiao",staticStyle:{display:"flex"}},[a("div",{staticStyle:{"line-height":"40px"}},[t._v("每个商品评价的范围数量：")]),a("el-input",{staticStyle:{width:"20%","margin-left":"15px"},attrs:{placeholder:"如3或3,5",clearable:""},model:{value:t.esmInput,callback:function(e){t.esmInput=e},expression:"esmInput"}})],1)]),a("div",{staticClass:"quan"})]):t._e(),t.is_next?[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}})]:t._e()],2),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[t.is_next?a("el-button",{on:{click:t.jumpback}},[t._v("取 消")]):t._e(),t.is_next?a("el-button",{attrs:{type:"primary"},on:{click:t.next}},[t._v("下一步")]):t._e(),t.is_next?t._e():a("el-button",{on:{click:t.back}},[t._v("上一步")]),t.is_next?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提 交")])],1)],1)],1)])],1)],1)],1)],1)},i=[],n=(a("5c96"),a("a49b"),a("15fc")),l=a("71c2"),o={data:function(){return{fx_search_key:"",is_reseller:1,is_two:0,active_name:"one",is_next:!0,choose:!0,price:"",obj:{id:[],num:""},checked:"",tableDataA:[],tableDataB:{ids:[],num:""},oid:0,size:8,total:1e3,value:"",esmInput:""}},watch:{active_name:function(){"one"==this.active_name&&(this.is_two=0,this.is_next=!0),"two"==this.active_name&&(this.is_two=1,this.is_next=!1)}},components:{Header:l["a"],NavTo:n["a"]},mounted:function(){this._load()},methods:{_load:function(){var t=this;this.http.post("product/admin/all_goods_info").then((function(e){for(var a in e.data){var s=e.data[a];s.is_reseller=0}t.all=e.data,t.total=e.data.length,t.tableDataA=e.data.slice(0,t.size)}))},search_fx:function(t){var e=[];for(var a in this.all){var s=this.all[a];s.goods_name.indexOf(t)>-1&&e.push(s)}this.tableDataA=e},reset:function(){this._load(),this.fx_search_key=""},jump_page:function(t){console.log(t);var e=this,a=(t-1)*e.size,s=t*e.size;console.log(a,s),this.tableDataA=this.all.slice(a,s)},quanxuan:function(){if(""!=this.tableDataA){console.log("a",this.tableDataA);for(var t=this.tableDataA.length,e=[],a=0;a<t;a++)e.push(this.tableDataA[a].goods_id),this.tableDataA[a].is_reseller=1;console.log(e),this.tableDataB["ids"]=e,this.$message({message:"已全部添加",type:"success"}),console.log("b",this.tableDataB)}else this.$message({message:"请确认商品",type:"warning"})},next:function(){this.is_two=1,this.active_name="two",this.is_next=!1},back:function(){this.is_two=0,this.active_name="one",this.is_next=!0},join:function(t,e){this.tableDataA[e].is_reseller=1;var a=t;""==this.tableDataB.ids||-1==this.tableDataB.ids.indexOf(a.goods_id)?(this.tableDataB.ids.push(a.goods_id),this.$message({message:"添加成功",type:"success"})):this.$message({message:"请勿重复添加",type:"warning"})},cancel:function(t,e){var a=e;if(""!=this.tableDataB.ids){for(var s=this.tableDataB.ids.length,i=this.tableDataB.ids,n=0;n<s;n++)if(-1!=i.indexOf(a)){var l=i.indexOf(a);i.splice(l,1),console.log(i);break}this.tableDataA[t].is_reseller=0}},onSubmit:function(){var t=this,e=this.esmInput;if(""==e&&e<0)return this.$message({message:"范围数值要大于0",type:"warning"}),!1;if(""==this.tableDataB.ids)return this.$message({message:"请添加商品",type:"warning"}),!1;this.tableDataB["num"]=e;var a=this.tableDataB;a.stoken=localStorage.getItem("stoken");var s="/rate/admin/key_rate";this.http.post_show(s,a).then((function(e){200==e.status&&(t.$message({message:"提交成功",type:"success"}),t.$router.push({path:"/extend/application"}))})).catch((function(t){return t}))},jumpback:function(){this.$router.push({path:"/extend/application"})}}},r=o,c=(a("a0b3"),a("2877")),u=Object(c["a"])(r,s,i,!1,null,null,null);e["default"]=u.exports},9362:function(t,e,a){},a0b3:function(t,e,a){"use strict";a("9362")}}]);